#########################################################################################
#                                                                                       #
#                          CONTAVECT CONFIGURATION FILE                                 #
#                                                                                       #
#########################################################################################                                                    

#########################################################################################
#                                 INSTRUCTIONS      					#
#########################################################################################

#   Values can by customized with users values, but the file template must remain
#   unchanged, otherwise the program will not be able to load default values.
#   Please follow the following recommendations :
#   - 
#   - File path should be indicated as absolute path preferably and should not contain
#     blank spaces  
#   - Values identified with '**' in the descriptor are not recommended to be modified              
#                                                                                       


#########################################################################################
#                                 PARAMETERS      					#
#########################################################################################

####    GENERAL SECTION    ####

#   General parameters of the program 
[General]

#   Path where to create a folder in which all files generated during the program will
#   be stored. Can be leaved empty if you want to work in the current directory (string)
outdir : ./test/

#   String that will be used to prefix all data generated by the program. Cannot
#   contain any "\" character. If leaved blank 'out' will be used as a prefix (string)
outprefix : AAV-100k_chr11-22


####    REFERENCE DEFINITIONS    ####

#   These sections corresponds to the definition of References sequence objects. They
#   are defined by a name, a path to a fasta file that can contain multiple sequences, 
#   and finally a list of output files for this reference. To be properly interpreted
#   Items in the list needs to be choose among :'bam', 'sam', 'bedgraph', 'bed',
#   'covgraph', 'variant'.

#   BAM and SAM correspond to the standard BAM/SAM format. They will be sorted and with
#   a bam index. BAM is much more compact than SAM but not human readeable.

#   BEDGRAPH and BAD are data recapitulating the coverage of reads over the sequence.
#   bed report the coverage of all positions in the reference while bedgraph is more
#   concise since uncovered regions are not reported and contigous positions of same
#   coverage are reported only once. for large sequences bedgraph only should be used.

#   COVGRAPH is a graphical representation of the coverage as a svg file and should be
#   used only for small sized reference (> 50 000 pb). If selected the program will
#   generate a graphics per sequence mapped in the reference fasta file.

#   VARIANT will output a csv table containing the positions in the reference for which
#   at least 2 different frequent bases were found. It is a slow and memory comsumming
#   algorithm that should be used only if really required

#   It is possible to include as many independant reference as required by duplicating
#   a entire Ref section and updating the id number (Ref1, Ref2, Ref3 ... ). The order
#   of references is CRITICAL if you want to perform a reference masking since it will
#   start by the last reference masked by all the others then the penultimate masked by
#   all others except the last and and so on until there is only one reference remaining

[Ref1]
#   Name of the reference (string)
name : AAV
#   Path to the reference fasta file that can contain multiple sequences.
#   Can be gzipped (string)
fasta : ./references/AAV-RSV-GFP.fa.gz
#   List of output required for the reference separated by any blank space. See above
#   for valid values (list of strings)
output : bam	sam	bedgraph	bed	covgraph	variant

[Ref2]
name : Backbone
fasta : ./references/Bacterial_backbone.fa.gz
output : bam	sam	bedgraph	bed	covgraph	variant

[Ref3]
name : Helper 
fasta : ./references/Helper_plasmid.fa.gz
output : bam	sam	bedgraph	bed	covgraph	variant

[Ref4]
name : Ad5
fasta : ./references/Ad5_in_293_genome.fa.gz
output : bam	bedgraph

[Ref5]
name : human_genome
fasta : ./references/HG_GRCh38_chr22.fa.gz
output : bam	bedgraph	


####    FASTQ FILES    ####

#   This program is dedicated to paired en data only and will not work if a pair of fastq
#   is not provided. Fastq can be pretreated for quality or adapter trimming or it can
#   be done directly within the pipeline with an homemade efficient module.

[Fastq]

# Path to the file containing the forward reads (string)
R1 : ./fastq/1M_AAV_R1.fastq.gz
# Path to the file containing the reverse reads (string)
R2 : ./fastq/1M_AAV_R2.fastq.gz


####    REFERENCE MASKING OPTIONS (FACULTATIVE)    ####

#   This section group options to parameters a facultative step of homologies masking
#   in ref as explain in the program docimentation and above. It is based on the retrieval
#   of similarities using blastn from blast+ followed by an hard masking of hits before
#   rewritting of a new reference fasta file 

[Ref_Masking]

#   Flag to activate or deactivate the reference masking. If False the following options
of the section won't be parsed (Boolean) 
ref_masking : True

# ** Command line options that will be used by blastn for alignment (string) 
blastn_opt : -evalue 0.1

# ** Command line options that will be used by mkblastdb for database creation (string)
mkblastdb_opt :

# ** Path to the blastn executable (not required is added to system path) (string)
blastn : blastn

# ** Path to the mkblastdb executable (not required is added to system path) (string)
mkblastdb : mkblastdb

####    FASTQ FILTERING OPTIONS (FACULTATIVE)    ####

#   
#    

[Fastq_Filtering]
input_qual : fastq-sanger
quality_filtering : False
min_qual : 25
adapter_trimming : False
adapters : GATCGGAAGAGCACACGTCTGAACTCCAGTCACACAGTGATCTCGTATGC
find_rc : True
min_read_len : 0.6
min_match_len : 0.8
min_match_score : 1.4
# Must be integers
ssw_match : 2
ssw_mismatch : 2
ssw_gap_open : 3
ssw_gap_extend : 1

[Bwa_Alignment]
bwa_index : ./test/bwa_index/out.idx
bwa_mem_opt : -M
bwa_index_opt :
bwa_aligner  : bwa mem
bwa_indexer : bwa index

[Output]
min_mapq : 30
unmapped_bam = True
unmapped_sam = True
cov_min_depth : 4
var_min_depth : 500
var_min_freq : 0.2


